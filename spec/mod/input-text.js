require("input-text",function(t,e){var n=require("wdg"),i=require("data2"),o=function(t){n.call(this);var e=n.tag("input");this._input=e;var o=this;this.addClass("tp4-input"),"object"!=typeof t&&(t={}),"string"!=typeof t.type&&(t.type="text"),e.attr("type",t.type),"undefined"!=typeof t.size&&(e.attr("size",t.size),this.css("width",2+t.size+"em")),"string"==typeof t.placeholder&&e.attr("placeholder",t.placeholder),"undefined"!=typeof t.autofocus&&e.attr("autofocus",1),"undefined"!=typeof t.width&&("number"==typeof t.width&&(t.width=""+t.width+"em"),this.css("width",t.width));var a=t.onValid;if("object"==typeof a&&"function"==typeof a.enabled?t.onValid=function(t){a.enabled(t)}:"function"!=typeof a&&(t.onValid=null),"object"==typeof t.validator){var r=t.validator;t.validator=function(t){return r.test(t)}}else if("function"==typeof t.validator){var u=t.validator;t.validator=function(t){return u.call(o,t)}}if(this._valid=0,e.addEvent("keyup",function(){o.validate(),o._onChange()}),"object"==typeof t.onEnter&&"function"==typeof t.onEnter.fire){var l=t.onEnter;t.onEnter=function(){l.fire()}}"function"==typeof t.onEnter&&e.addEvent("keyup",function(e){o._valid>-1&&13==e.keyCode?window.setTimeout(function(){t.onEnter(o)}):o.validate()}),"string"!=typeof t.value&&(t.value=""),e.addEvent("focus",function(){o.selectAll()}),this._opts=t;var d=t.data;if(d&&(this.val(i.get(d)||""),e.addEvent("blur",function(){i.set(d,o.val())})),"undefined"!=typeof t.label){var s=n.div("label").text(t.label).attr("title",t.label);this.append(s)}this.append(e)};o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.prototype.validate=function(){var t=this._opts;if("function"!=typeof t.validator)return this;var e=t.onValid;try{t.validator(this.val())?(this._valid=1,this._input.removeClass("not-valid").addClass("valid"),e&&e(!0,this)):(this._valid=-1,this._input.removeClass("valid").addClass("not-valid"),e&&e(!1,this))}catch(n){console.error("[tp4.input] Validation error: ",n)}return this},o.prototype.fireChange=function(){return this._onChange(),this},o.prototype._onChange=function(){var t=this._Change;"function"==typeof t&&t.call(this)},o.prototype.Change=function(t){return"undefined"==typeof t?this._Change:("function"==typeof t&&(this._Change=t),this)},o.prototype.selectAll=function(){var t=this._input.element();return t.setSelectionRange(0,t.value.length),!0},o.prototype.val=function(t){var e=this._input.element();return"undefined"==typeof t?e.value:(e.value=t,this.validate(),this)},o.prototype.focus=function(){var t=this._input.element();return window.setTimeout(function(){t.focus()},1),this},o.prototype.isValid=function(){return 1==this._valid},o.prototype.enabled=function(t){return"undefined"==typeof t?this._input.hasAttr("disabled"):(t?this._input.removeAttr("disabled"):this._input.attr("disabled","true"),this)},o.create=function(t){return new o(t)},e.exports=o});
//# sourceMappingURL=input-text.js.map